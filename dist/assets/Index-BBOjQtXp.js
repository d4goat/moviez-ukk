import{u as N}from"./hooks-BxjXLzY_.js";import{a0 as A,G as $,h as B,j as b,c as G,O as H,q,v as F,e as L,D as M,E as D,F as T,m as x,p as g,x as l,H as U,C as I,y as o,A as C,M as W,I as K,a1 as O,L as Q,$ as r,w as Y,B as E,Z,l as z}from"./main-B8dzZHEF.js";import{c as J,a as m}from"./index.esm-NSx9nZrM.js";function X(h={}){return A({queryKey:["genre"],queryFn:()=>$.get("/master/genre").then(d=>d.data.data),...h})}const ee={class:"card bg-component shadow-3 shadow-white text-bodydark1"},le={class:"card-header flex justify-between items-center my-3"},te=l("i",{class:"la la-times-circle"},null,-1),ae={class:"card-body"},se={class:"row"},oe={class:"col-md-4 flex flex-col mb-3"},re=l("label",{class:"form-label"},"Title",-1),ne={class:"col-md-4 flex flex-col mb-3"},de=l("label",{class:"form-label"},"Description",-1),ie={class:"col-md-4 flex flex-col mb-3"},ce=l("label",{class:"form-label"},"Duration",-1),ue={class:"col-md-4 flex flex-col mb-3"},me=l("label",{class:"form-label"},"Producer",-1),pe={class:"col-md-4 flex flex-col mb-3"},fe=l("label",{class:"form-label"},"Director",-1),be={class:"col-md-4 flex flex-col mb-3"},_e=l("label",{class:"form-label"},"Writer",-1),ve={class:"col-md-6 flex flex-col mb-3"},xe=l("label",{class:"form-label"},"Release Date",-1),ge={class:"col-md-6 flex flex-col mb-3"},he=l("label",{class:"form-label"},"Trailer",-1),ye={class:"flex flex-col mb-3"},Ce=l("label",{class:"form-label"},"Film Genre",-1),Ve={class:"space-x-2"},ke=["for"],we=["id","value"],Fe={class:"text-lg font-semibold pl-2"},De={class:"col-md-12 flex flex-col mb-3"},$e=l("label",{class:"form-label"},"Poster",-1),Me=l("div",{class:"card-footer flex"},[l("button",{type:"submit",class:"btn btn-md btn-primary ms-auto"},"Submit")],-1),Te=B({__name:"Form",props:{selected:{type:String,default:null}},emits:["close","refresh"],setup(h,{emit:d}){const i=h,e=b({genre_film_id:[]}),p=b(["image/jpg","image/png","image/jpeg"]),f=b([]),_=d,y=b(),V=J().shape({title:m().required("Title cannot be empty"),description:m().required("Description cannot be empty"),duration:m().required("Duration cannot be empty"),producer:m().required("Producer cannot be empty"),director:m().required("Director cannot be empty"),writer:m().required("Writer cannot be empty"),poster:m().nullable(),trailer:m().nullable(),release_date:m().nullable()});function n(){M(document.getElementById("form-film")),$.get(`/master/film/${i.selected}`).then(({data:s})=>{e.value=s.data,f.value=s.data.poster?["/storage/"+s.data.poster]:[]}).catch(s=>{console.error(s.response.data.message),D.error(s.response.data.message)}).finally(()=>T(document.getElementById("form-film")))}function v(){const s=new FormData;s.append("title",e.value.title),s.append("description",e.value.description),s.append("duration",e.value.duration),s.append("producer",e.value.producer),s.append("director",e.value.director),s.append("writer",e.value.writer),s.append("release_date",e.value.release_date),e.value.genre_film_id.forEach(t=>{s.append("genre_film_id[]",t)}),f.value.length&&s.append("poster",f?.value[0].file),e.value?.trailer&&s.append("trailer",e.value.trailer),i.selected&&s.append("_method","PUT"),M(document.getElementById("form-film")),$({method:"post",url:i.selected?`/master/film/${i.selected}`:"/master/film/store",data:s,headers:{"Content-Type":"multipart/form-data"}}).then(()=>{D.success("Success create data film"),y.value.resetForm(),_("close"),_("refresh")}).catch(t=>{D.error(t.response.data.message),console.error(t.response.data.message)}).finally(()=>T(document.getElementById("form-film")))}const k=X(),w=G(()=>k.data.value?.map(s=>({id:s.id,text:s.name})));return H(()=>{i.selected&&n()}),(s,t)=>{const c=x("Field"),u=x("ErrorMessage"),R=x("date-picker"),S=x("file-upload"),P=x("VForm");return g(),q(P,{onSubmit:v,"validation-schema":L(V),ref_key:"formRef",ref:y,id:"form-film"},{default:F(()=>[l("div",ee,[l("div",le,[l("h2",null,U(h.selected?"Edit":"Tambah")+" Film ",1),l("button",{type:"button",class:"btn btn-md bg-red-600 hover:bg-red-700",onClick:t[0]||(t[0]=a=>s.$emit("close"))},[te,I(" Batal ")])]),l("div",ae,[l("div",se,[l("div",oe,[re,o(c,{autocomplete:"off",name:"title",type:"text",placeholder:"Masukkan Film Title",class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-2.5",modelValue:e.value.title,"onUpdate:modelValue":t[1]||(t[1]=a=>e.value.title=a)},null,8,["modelValue"]),o(u,{name:"title",class:"text-red-500"})]),l("div",ne,[de,o(c,{autocomplete:"off",name:"description",type:"text",placeholder:"Masukkan Film Description",class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-2.5",modelValue:e.value.description,"onUpdate:modelValue":t[2]||(t[2]=a=>e.value.description=a)},null,8,["modelValue"]),o(u,{name:"description",class:"text-red-500"})]),l("div",ie,[ce,o(c,{autocomplete:"off",name:"duration",oninput:"this.value = this.value.replace(/[^\\d,]/g, '')",type:"text",placeholder:"Masukkan Durasi Film",class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-2.5",modelValue:e.value.duration,"onUpdate:modelValue":t[3]||(t[3]=a=>e.value.duration=a)},null,8,["modelValue"]),o(u,{name:"duration",class:"text-red-500"})]),l("div",ue,[me,o(c,{autocomplete:"off",name:"producer",type:"text",placeholder:"Masukkan Film Producer",class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-2.5",modelValue:e.value.producer,"onUpdate:modelValue":t[4]||(t[4]=a=>e.value.producer=a)},null,8,["modelValue"]),o(u,{name:"producer",class:"text-red-500"})]),l("div",pe,[fe,o(c,{autocomplete:"off",name:"director",type:"text",placeholder:"Masukkan Film Director",class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-2.5",modelValue:e.value.director,"onUpdate:modelValue":t[5]||(t[5]=a=>e.value.director=a)},null,8,["modelValue"]),o(u,{name:"director",class:"text-red-500"})]),l("div",be,[_e,o(c,{autocomplete:"off",name:"writer",type:"text",placeholder:"Masukkan Film Writer",class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-2.5",modelValue:e.value.writer,"onUpdate:modelValue":t[6]||(t[6]=a=>e.value.writer=a)},null,8,["modelValue"]),o(u,{name:"writer",class:"text-red-500"})]),l("div",ve,[xe,o(c,{autocomplete:"off",name:"release_date",type:"text",placeholer:"Insert film release date",class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-2.5",modelValue:e.value.release_date,"onUpdate:modelValue":t[8]||(t[8]=a=>e.value.release_date=a)},{default:F(()=>[o(R,{modelValue:e.value.release_date,"onUpdate:modelValue":t[7]||(t[7]=a=>e.value.release_date=a),placeholder:"Insert film release date",class:"rounded py-2.5",config:{enableTime:!0,format:"Y:m:d H:i"}},null,8,["modelValue"])]),_:1},8,["modelValue"]),o(u,{name:"release_date",class:"text-red-500"})]),l("div",ge,[he,o(c,{autocomplete:"off",name:"trailer",type:"text",placeholder:"Masukkan Film Trailer",class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-2.5",modelValue:e.value.trailer,"onUpdate:modelValue":t[9]||(t[9]=a=>e.value.trailer=a)},null,8,["modelValue"]),o(u,{name:"trailer",class:"text-red-500"})]),l("div",ye,[Ce,l("div",Ve,[(g(!0),C(Q,null,W(w.value,a=>(g(),C("label",{key:a.id,for:"genre_"+a.id,class:"",id:"genres"},[K(l("input",{type:"checkbox",id:"genre_"+a.id,value:a.id,"onUpdate:modelValue":t[10]||(t[10]=j=>e.value.genre_film_id=j),name:"genre_film_id",class:"form-check-input focus:ring-0 mb-2 p-1.5"},null,8,we),[[O,e.value.genre_film_id]]),l("span",Fe,U(a.text),1)],8,ke))),128))])]),l("div",De,[$e,o(c,{autocomplete:"off",name:"poster",type:"text",placeholder:"Masukkan Film Poster",class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-2.5",modelValue:e.value.poster,"onUpdate:modelValue":t[12]||(t[12]=a=>e.value.poster=a)},{default:F(()=>[o(S,{files:f.value,"accepted-file-types":p.value,onUpdatefiles:t[11]||(t[11]=a=>f.value=a)},null,8,["files","accepted-file-types"])]),_:1},8,["modelValue"]),o(u,{name:"poster",class:"text-red-500"})])])]),Me])]),_:1},8,["validation-schema"])}}}),Ue={class:"border-b-[1px] border-body pb-3"},Ee={class:"w-full h-full flex-col rounded-lg space-y-4"},Be={class:"border-b-[1px] border-body flex justify-between items-center p-4"},qe=l("h2",{class:"text-xl"},"Films List",-1),Ie=l("i",{class:"fa-solid fa-plus"},null,-1),Re={class:"w-full h-full py-2 px-4"},Ne=B({__name:"Index",setup(h){const d=Z(),i=b(null),e=b(""),p=b(!1),{delete:f}=N({onSuccess:()=>i?.value.refetch()}),_=z(),y=[d.accessor("no",{header:"No"}),d.accessor("title",{header:"Title"}),d.accessor("description",{header:"Description"}),d.accessor("duration",{header:"Duration",cell:n=>r("div",[n.getValue()+" Minute"])}),d.accessor("producer",{header:"Producer"}),d.accessor("uuid",{header:"Action",cell:n=>r("div",{class:"flex gap-2"},[r("button",{class:"btn btn-sm btn-warning flex items-center",onClick:()=>_.push({name:"master.film.review",params:{uuid:n.getValue()}})},[r("i",{class:"fa-regular fa-star fs-5"}),r("span",{class:"ml-2"},"Review")]),r("button",{class:"btn btn-sm btn-success flex items-center",onClick:()=>_.push({name:"master.film.cast",params:{uuid:n.getValue()}})},[r("i",{class:"la la-users fs-3"}),r("span",{class:"ml-2"},"Cast")]),r("button",{class:"btn btn-sm btn-primary flex items-center",onClick:()=>_.push({name:"master.film.show-time",params:{uuid_film:n.getValue(),uuid_studio:0}})},[r("i",{class:"la la-clock fs-3"}),r("span",{class:"ml-2"},"Showtime")]),r("button",{class:"btn btn-sm bg-purple-600 hover:bg-purple-700",onClick:()=>{e.value=n.getValue(),p.value=!0}},[r("i",{class:"la la-pencil fs-3"})]),r("button",{class:"btn btn-sm bg-red-600 hover:bg-red-700",onClick:()=>f(`/master/film/${n.getValue()}`)},[r("i",{class:"la la-trash fs-3"})])])})],V=()=>i.value.refetch();return Y(p,n=>{n||(e.value=""),window.scrollTo(0,0)}),(n,v)=>{const k=x("paginate");return g(),C("div",Ue,[p.value?(g(),q(Te,{key:0,selected:e.value,onClose:v[0]||(v[0]=w=>p.value=!1),onRefresh:V},null,8,["selected"])):E("",!0),l("div",Ee,[l("div",Be,[qe,p.value?E("",!0):(g(),C("button",{key:0,type:"button",class:"bg-blue-600 text-bodydark1 py-2 px-4 rounded hover:bg-blue-700",onClick:v[1]||(v[1]=w=>p.value=!0)},[I(" Add "),Ie]))]),l("div",Re,[o(k,{ref_key:"paginateRef",ref:i,id:"table-films",url:"/master/film",columns:y},null,512)])])])}}});export{Ne as default};
