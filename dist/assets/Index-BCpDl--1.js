import{h as C,j as i,a0 as V,q as E,v as f,e as I,D as q,G as g,E as u,F as b,m as c,p as F,x as e,y as s}from"./main-B8dzZHEF.js";import{c as k,a as r}from"./index.esm-NSx9nZrM.js";const B={class:"card bg-component text-bodydark1"},D=e("div",{class:"card-header flex items-center my-3"},[e("h2",{class:"text-xl"},"Edit Setting")],-1),N={class:"card-body"},U={class:"row"},S={class:"col-md-6 flex flex-col mb-3"},j=e("label",{name:"name",class:"form-label"},"Name",-1),w={class:"col-md-6 flex flex-col mb-3"},P=e("label",{name:"description",class:"form-label"},"Description",-1),$={class:"col-md-6 flex flex-col mb-3"},L=e("label",{name:"email",class:"form-label"},"Email",-1),M={class:"col-md-6 flex flex-col mb-3"},R=e("label",{name:"phone",class:"form-label"},"Phone",-1),T={class:"col-md-12 flex flex-col mb-3"},G=e("label",{name:"logo",class:"form-label"},"Logo",-1),K=e("div",{class:"card-footer flex"},[e("button",{type:"submit",class:"btn btn-md btn-primary my-3 ms-auto"},"Submit")],-1),H=C({__name:"Index",setup(Q){const o=i({}),p=i(null),v=k().shape({name:r().required("Name cannot be null"),description:r().required("Description cannot be null"),logo:r().required("Logo cannot be null"),email:r().email().required("Email cannot be null"),phone:r().matches(/^08[0-9]\d{9,11}$/,"Invalid Phone Number").required("Phone cannot be null")}),x=i(["image/jpg","image/png","image/jpeg"]),m=i([]);function _(){const a=new FormData;a.append("name",o.value.name),a.append("description",o.value.description),a.append("email",o.value.email),a.append("phone",o.value.phone),m.value.length&&a.append("logo",m.value[0].file),q(document.getElementById("form-setting")),g({method:"post",url:"/setting/update",data:a,headers:{"Content-Type":"multipart/form-data"}}).then(()=>{u.success("Data saved successfully"),p.value.resetForm()}).catch(l=>{console.error(l.response.data.message),u.error(l.response.data.message)}).finally(()=>b(document.getElementById("form-setting")))}return V({queryKey:["setting","edit"],queryFn:async()=>g.get("/setting"),onSuccess:a=>{o.value=a.data,console.log(o.value),b(document.getElementById("form-setting"))},onError:a=>{console.error(a.response.data.message),u.error(a.response.data.message)}}),(a,l)=>{const n=c("Field"),d=c("ErrorMessage"),h=c("file-upload"),y=c("VForm");return F(),E(y,{"validation-schema":I(v),ref_key:"formRef",ref:p,onSubmit:_,id:"form-setting"},{default:f(()=>[e("div",B,[D,e("div",N,[e("div",U,[e("div",S,[j,s(n,{class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-[11px]",name:"name",modelValue:o.value.name,"onUpdate:modelValue":l[0]||(l[0]=t=>o.value.name=t),placeholder:"Insert setting Name",autocomplete:"off",type:"text"},null,8,["modelValue"]),s(d,{name:"name",class:"text-red-500"})]),e("div",w,[P,s(n,{class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-[11px]",name:"description",modelValue:o.value.description,"onUpdate:modelValue":l[1]||(l[1]=t=>o.value.description=t),placeholder:"Insert setting description",autocomplete:"off",type:"text"},null,8,["modelValue"]),s(d,{name:"description",class:"text-red-500"})]),e("div",$,[L,s(n,{class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-[11px]",name:"email",modelValue:o.value.email,"onUpdate:modelValue":l[2]||(l[2]=t=>o.value.email=t),placeholder:"Insert setting email",autocomplete:"off",type:"email"},null,8,["modelValue"]),s(d,{name:"email",class:"text-red-500"})]),e("div",M,[R,s(n,{oninput:"this.value = this.value.replace(/[^\\d,]/g, '')",class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-[11px]",name:"phone",modelValue:o.value.phone,"onUpdate:modelValue":l[3]||(l[3]=t=>o.value.phone=t),placeholder:"Insert setting phone",autocomplete:"off",type:"text"},null,8,["modelValue"]),s(d,{name:"phone",class:"text-red-500"})]),e("div",T,[G,s(n,{class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-[11px]",name:"logo",modelValue:o.value.logo,"onUpdate:modelValue":l[5]||(l[5]=t=>o.value.logo=t),placeholder:"Insert setting logo",autocomplete:"off",type:"text"},{default:f(()=>[s(h,{files:m.value,"accepted-file-types":x.value,onUpdatefiles:l[4]||(l[4]=t=>m.value=t)},null,8,["files","accepted-file-types"])]),_:1},8,["modelValue"]),s(d,{name:"logo",class:"text-red-500"})])])]),K])]),_:1},8,["validation-schema"])}}});export{H as default};
