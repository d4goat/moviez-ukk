import{u as F}from"./hooks-BxjXLzY_.js";import{c as U,a as i,b as A}from"./index.esm-NSx9nZrM.js";import{h as E,j as f,O as M,q as B,e as S,D as C,G as y,E as w,F as k,m as h,v as q,p as v,x as e,H as I,C as N,y as l,$ as p,w as T,A as V,B as $,Z as D}from"./main-B8dzZHEF.js";const R={class:"card bg-component text-bodydark1"},j={class:"card-header align-items-center flex justify-between my-3"},H=e("i",{class:"fa-solid fa-circle-xmark"},null,-1),K={class:"card-body"},O={class:"row"},G={class:"col-md-6 flex flex-col mb-3"},L=e("label",{class:"form-label"},"Nama",-1),Z={class:"col-md-6 flex flex-col mb-3"},z=e("label",{class:"form-label"},"Email",-1),J={class:"col-md-6 flex flex-col mb-3"},Q=e("label",{class:"form-label"},"Phone",-1),W={class:"col-md-6 flex flex-col mb-3"},X=e("label",{class:"form-label"},"Password",-1),Y={class:"col-md-6 flex flex-col mb-3"},ee=e("label",{class:"form-label"},"Konfirmasi Password",-1),se=e("div",{class:"card-footer flex"},[e("button",{type:"submit",class:"btn btn-md my-3 ms-auto bg-blue-600 text-white"},"Submit")],-1),ae=E({__name:"Form",props:{selected:{type:String,default:null}},emits:["close","refresh"],setup(_,{emit:m}){const n=_,s=f({}),r=m,b=f(),g=U().shape({name:i().required("Nama tidak boleh kosong"),email:i().email().required("Email tidak boleh kosong"),phone:i().matches(/^08[0-9]\d{8,11}$/,"Invalid nomor telepon").required(),password:i().min(8,"Password minimal harus diisi 8 karakter").required().label("Password"),passwordConfirmation:i().oneOf([A("password")],"Passwords harus sesuai").required().label("Password Confirmation")});function x(){C(document.getElementById("form-user")),y.get(`/master/users/${n.selected}`).then(({data:a})=>{s.value=a.data}).catch(a=>{w.error(a.response.data.message)}).finally(()=>{k(document.getElementById("form-user"))})}function d(){C(document.getElementById("form-user"));const a=new FormData;a.append("name",s.value.name),a.append("email",s.value.email),a.append("phone",s.value.phone),s.value?.password&&(a.append("password",s.value.password),a.append("password_confirmation",s.value.passwordConfirmation)),n.selected&&a.append("_method","PUT"),y({method:"post",url:n.selected?`/master/users/${n.selected}`:"/master/users/store",data:a,headers:{"Content-Type":"multipart/form-data"}}).then(()=>{w.success("Success create data user"),b.value.resetForm(),r("close"),r("refresh")}).catch(o=>{console.error(o.response.data.message),w.error(o.response.data.message)}).finally(()=>{k(document.getElementById("form-user"))})}return M(()=>{n.selected&&x()}),(a,o)=>{const c=h("Field"),u=h("ErrorMessage"),P=h("VForm");return v(),B(P,{onSubmit:d,"validation-schema":S(g),ref_key:"formRef",ref:b,id:"form-user"},{default:q(()=>[e("div",R,[e("div",j,[e("h2",null,I(_.selected?"Edit":"Tambah")+" User ",1),e("button",{type:"button",class:"btn btn-md bg-red-600 hover:bg-red-700",onClick:o[0]||(o[0]=t=>a.$emit("close"))},[H,N(" Batal ")])]),e("div",K,[e("div",O,[e("div",G,[L,l(c,{autocomplete:"off",name:"name",type:"text",placeholder:"Masukkan Nama Anda",class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-3",modelValue:s.value.name,"onUpdate:modelValue":o[1]||(o[1]=t=>s.value.name=t)},null,8,["modelValue"]),l(u,{name:"name",class:"text-red-500"})]),e("div",Z,[z,l(c,{autocomplete:"off",name:"email",type:"text",placeholder:"Masukkan Email Anda",class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-3",modelValue:s.value.email,"onUpdate:modelValue":o[2]||(o[2]=t=>s.value.email=t)},null,8,["modelValue"]),l(u,{name:"email",class:"text-red-500"})]),e("div",J,[Q,l(c,{autocomplete:"off",name:"phone",type:"text",placeholder:"Masukkan No Telepon Anda",class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-3",modelValue:s.value.phone,"onUpdate:modelValue":o[3]||(o[3]=t=>s.value.phone=t)},null,8,["modelValue"]),l(u,{name:"phone",class:"text-red-500"})]),e("div",W,[X,l(c,{autocomplete:"off",name:"password",type:"password",placeholder:"Masukkan Password Anda",class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-3",modelValue:s.value.password,"onUpdate:modelValue":o[4]||(o[4]=t=>s.value.password=t)},null,8,["modelValue"]),l(u,{name:"password",class:"text-red-500"})]),e("div",Y,[ee,l(c,{autocomplete:"off",name:"passwordConfirmation",type:"password",placeholder:"Masukkan Konfirmasi Password Anda",class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-3",modelValue:s.value.passwordConfirmation,"onUpdate:modelValue":o[5]||(o[5]=t=>s.value.passwordConfirmation=t)},null,8,["modelValue"]),l(u,{name:"passwordConfirmation",class:"text-red-500"})])])]),se])]),_:1},8,["validation-schema"])}}}),oe={class:"w-full h-full flex-col rounded-lg space-y-4"},le={class:"border-b-[1px] border-body flex justify-between items-center p-4"},te=e("h2",null,"Users List",-1),ne=e("i",{class:"fa-solid fa-plus"},null,-1),re={class:"w-full h-full py-2 px-4"},ue=E({__name:"Index",setup(_){const m=D(),n=f(null),s=f(""),r=f(!1),{delete:b}=F({onSuccess:()=>n.value.refetch()}),g=[m.accessor("no",{header:"No"}),m.accessor("name",{header:"Name"}),m.accessor("uuid",{header:"Action",cell:d=>p("div",{class:"d-flex gap-2"},[p("button",{class:"btn btn-sm bg-purple-400 hover:bg-purple-600",onClick:()=>{s.value=d.getValue(),r.value=!0}},p("i",{class:"la la-pencil fs-2"})),p("button",{class:"btn btn-sm btn-icon bg-red-600 hover:bg-red-700",onClick:()=>b(`/master/users/${d.getValue()}`)},p("i",{class:"la la-trash fs-2"}))])})],x=()=>n.value.refetch();return T(r,d=>{d||(s.value=""),window.scrollTo(0,0)}),(d,a)=>{const o=h("paginate");return v(),V("div",null,[r.value?(v(),B(ae,{key:0,selected:s.value,onClose:a[0]||(a[0]=c=>r.value=!1),onRefresh:x},null,8,["selected"])):$("",!0),e("div",oe,[e("div",le,[te,r.value?$("",!0):(v(),V("button",{key:0,type:"button",class:"bg-blue-600 text-bodydark1 py-2 px-4 rounded hover:bg-blue-700",onClick:a[1]||(a[1]=c=>r.value=!0)},[N(" Add "),ne]))]),e("div",re,[l(o,{ref_key:"paginateRef",ref:n,id:"table-user",url:"/master/users",columns:g},null,512)])])])}}});export{ue as default};
