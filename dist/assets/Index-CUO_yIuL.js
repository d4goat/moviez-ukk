import{u as q}from"./hooks-BxjXLzY_.js";import{c as j,a as $}from"./index.esm-NSx9nZrM.js";import{a0 as A,G as g,h as E,j as p,c as T,O as U,q as N,v as k,e as M,D as S,E as x,F as w,m as f,p as _,x as e,H,C as D,y as i,$ as m,w as G,A as B,B as F,Z as K,l as L}from"./main-B8dzZHEF.js";function O(u={}){return A({queryKey:["cinema"],queryFn:async()=>await g.get("/master/cinema").then(n=>n.data.data),...u})}const P={class:"card bg-component text-bodydark1"},Q={class:"card-header flex justify-between items-center my-3"},Z=e("i",{class:"la la-times-circle"},null,-1),z={class:"card-body"},J={class:"row"},W={class:"col-md-6 flex flex-col mb-3"},X=e("label",{name:"name",class:"form-label"},"Name",-1),Y={class:"col-md-6 flex flex-col mb-3"},ee=e("label",{name:"cinema_id",class:"form-label"},"Cinema",-1),te=e("div",{class:"card-footer flex justify-end my-3"},[e("button",{class:"btn btn-md btn-primary ms-auto",type:"submit"},"Submit")],-1),se=E({__name:"Form",props:{selected:{type:String,default:null}},emits:["close","refresh"],setup(u,{emit:n}){const o=u,c=n,t=p({}),b=p(),h=j().shape({name:$().required("Name cannot be empty"),cinema_id:$().required("Cinema cannot be empty")});function v(){S(document.getElementById("form-studio")),g.get(`/master/studio/${o.selected}`).then(({data:s})=>{t.value=s.data}).catch(s=>{console.error(s.response.data.message),x.error(s.response.data.message)}).finally(()=>w(document.getElementById("form-studio")))}function y(){const s=new FormData;s.append("name",t.value.name),s.append("cinema_id",t.value.cinema_id),o.selected&&s.append("_method","PUT"),S(document.getElementById("form-studio")),g({method:"post",url:o.selected?`/master/studio/${o.selected}`:"/master/studio/store",data:s,headers:{"Content-Type":"multipart/form-data"}}).then(()=>{x.success("Data saved successfully"),b.value.resetForm(),c("close"),c("refresh")}).catch(a=>{console.error(a.response.data.message),x.error(a.response.data.message)}).finally(()=>w(document.getElementById("form-studio")))}const l=O(),d=T(()=>l.data.value?.map(s=>({id:s.id,text:s.name})));return U(()=>{o.selected&&v()}),(s,a)=>{const C=f("Field"),V=f("ErrorMessage"),I=f("select2"),R=f("VForm");return _(),N(R,{"validation-schema":M(h),ref_key:"formRef",ref:b,onSubmit:y,id:"form-studio"},{default:k(()=>[e("div",P,[e("div",Q,[e("h2",null,H(u.selected?"Edit":"Add")+" Studio ",1),e("button",{type:"button",class:"btn btn-md bg-red-600 hover:bg-red-700",onClick:a[0]||(a[0]=r=>s.$emit("close"))},[Z,D(" Batal ")])]),e("div",z,[e("div",J,[e("div",W,[X,i(C,{name:"name",class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-[11px]",modelValue:t.value.name,"onUpdate:modelValue":a[1]||(a[1]=r=>t.value.name=r),placeholder:"Insert Studio Name",type:"text",autocomplete:"off"},null,8,["modelValue"]),i(V,{name:"name",class:"text-red-500"})]),e("div",Y,[ee,i(C,{name:"cinema_id",class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-[11px]",modelValue:t.value.cinema_id,"onUpdate:modelValue":a[3]||(a[3]=r=>t.value.cinema_id=r),placeholder:"Select Cinema",type:"text",autocomplete:"off"},{default:k(()=>[i(I,{options:d.value,modelValue:t.value.cinema_id,"onUpdate:modelValue":a[2]||(a[2]=r=>t.value.cinema_id=r),class:"form-select-solid",placeholder:"Select Cinema"},null,8,["options","modelValue"])]),_:1},8,["modelValue"]),i(V,{name:"cinema_id",class:"text-red-500"})])])]),te])]),_:1},8,["validation-schema"])}}}),ae={class:"border-b-[1px] border-body pb-3"},oe={class:"w-full h-full flex flex-col rounded-xl space-y-4"},ne={class:"border-b-[1px] border-body flex justify-between items-center p-4"},le=e("h2",{class:"text-xl"},"Studio List",-1),ce=e("i",{class:"las la-plus"},null,-1),de={class:"w-full h-full py-2 px-4"},ue=E({__name:"Index",setup(u){const n=K(),o=p(),c=p(""),t=p(!1),b=L(),{delete:h}=q({onSuccess:o.value?.refetch()}),v=[n.accessor("no",{header:"No"}),n.accessor("name",{header:"Name"}),n.accessor("cinema.name",{header:"Cinema"}),n.accessor("uuid",{header:"Action",cell:l=>m("div",{class:"flex gap-4"},[m("button",{class:"btn btn-success btn-sm",onClick:()=>b.push({name:"master.studio.seat",params:{uuid:l.getValue()}})},["Seat "]),m("button",{class:"btn btn-sm bg-purple-600 hover:bg-purple-700",onClick:()=>{c.value=l.getValue(),t.value=!0}},[m("i",{class:"la la-pencil fs-2"})]),m("button",{class:"btn btn-sm bg-red-600 hover:bg-red-700",onClick:()=>h(`/master/studio/${l.getValue()}`)},[m("i",{class:"las la-trash fs-2"})])])})],y=()=>o.value.refetch();return G(t,l=>{l||(c.value=""),window.scrollTo(0,0)}),(l,d)=>{const s=f("paginate");return _(),B("main",ae,[t.value?(_(),N(se,{key:0,selected:c.value,onClose:d[0]||(d[0]=a=>t.value=!1),onRefresh:y},null,8,["selected"])):F("",!0),e("div",oe,[e("div",ne,[le,t.value?F("",!0):(_(),B("button",{key:0,type:"button",onClick:d[1]||(d[1]=a=>t.value=!0),class:"btn btn-md btn-primary"},[ce,D(" Add ")]))]),e("div",de,[i(s,{ref_key:"paginateRef",ref:o,url:"/master/studio",id:"table-studio",columns:v},null,512)])])])}}});export{ue as default};
