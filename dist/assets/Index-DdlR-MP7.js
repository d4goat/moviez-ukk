import{u as M}from"./hooks-BxjXLzY_.js";import{c as N,a as u,d as U}from"./index.esm-NSx9nZrM.js";import{h as B,j as b,O as q,q as P,v as g,e as T,D as k,G as D,E as C,F as $,m as f,p as v,x as t,H as I,C as S,y as l,$ as p,w as R,A as E,B as w,Z as A}from"./main-B8dzZHEF.js";const H={class:"card bg-component text-bodydark1"},j={class:"card-header flex justify-between items-center my-3"},Y=t("i",{class:"fa la la-times-circle"},null,-1),G={class:"card-body"},L={class:"row"},O={class:"mb-3 col-md-6 flex flex-col"},Z=t("label",{class:"form-label"},"Name",-1),z={class:"mb-3 col-md-6 flex flex-col"},J=t("label",{class:"form-label"},"Description",-1),K={class:"mb-3 col-md-6 flex flex-col"},Q=t("label",{class:"form-label"},"Discount",-1),W={class:"mb-3 col-md-6 flex flex-col"},X=t("label",{class:"form-label"},"Code",-1),ee={class:"mb-3 col-md-6 flex flex-col"},te=t("label",{class:"form-label"},"Start Date",-1),oe={class:"mb-3 col-md-6 flex flex-col"},ae=t("label",{class:"form-label"},"End Date",-1),se=t("div",{class:"card-footer flex"},[t("button",{class:"btn btn-md btn-primary ms-auto my-3",type:"submit"},"Submit")],-1),le=B({__name:"Form",props:{selected:{type:String,default:null}},emits:["close","refresh"],setup(x,{emit:d}){const n=x,m=d,e=b({}),_=b(),h=N().shape({name:u().required("Name cannot be empty"),description:u().required("Description cannot be empty"),start_date:u().required("Start Date cannot be empty"),end_date:u().required("End Date cannot be empty"),code:u().required("Code cannot be empty"),discount:U().required("Discount cannot be empty").label("Discount")});function y(){k(document.getElementById("form-promotion")),D.get(`/master/promotion/${n.selected}`).then(({data:a})=>{e.value=a.data}).catch(a=>{console.error(a.response.data.message),C.error(a.response.data.message)}).finally(()=>$(document.getElementById("form-promotion")))}function c(){const a=new FormData;a.append("name",e.value.name),a.append("description",e.value.description),a.append("start_date",e.value.start_date),a.append("end_date",e.value.end_date),a.append("code",e.value.code),a.append("discount",e.value.discount),k(document.getElementById("form-promotion")),n.selected&&a.append("_method","PUT"),D({method:"post",url:n.selected?`/master/promotion/${n.selected}`:"/master/promotion/store",data:a,headers:{"Content-Type":"multipart/form-data"}}).then(()=>{C.success("Data saved successfully"),_.value.resetForm(),m("close"),m("refresh")}).catch(o=>{console.error(o.response.data.message),C.error(o.response.data.message)}).finally(()=>$(document.getElementById("form-promotion")))}return q(()=>{n.selected&&y()}),(a,o)=>{const r=f("Field"),i=f("ErrorMessage"),V=f("date-picker"),F=f("VForm");return v(),P(F,{"validation-schema":T(h),ref_key:"formRef",ref:_,onSubmit:c,id:"form-promotion"},{default:g(()=>[t("div",H,[t("div",j,[t("h2",null,I(x.selected?"Edit":"Add")+" Promotion ",1),t("button",{type:"button",class:"btn btn-md bg-red-600 hover:bg-red-700",onClick:o[0]||(o[0]=s=>a.$emit("close"))},[Y,S(" Batal ")])]),t("div",G,[t("div",L,[t("div",O,[Z,l(r,{autocomplete:"off",name:"name",type:"text",placeholder:"Masukkan Promotion Name",class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-2.5",modelValue:e.value.name,"onUpdate:modelValue":o[1]||(o[1]=s=>e.value.name=s)},null,8,["modelValue"]),l(i,{name:"name",class:"text-red-500"})]),t("div",z,[J,l(r,{autocomplete:"off",name:"description",type:"text",placeholder:"Masukkan Promotion Description",class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-2.5",modelValue:e.value.description,"onUpdate:modelValue":o[2]||(o[2]=s=>e.value.description=s)},null,8,["modelValue"]),l(i,{name:"description",class:"text-red-500"})]),t("div",K,[Q,l(r,{autocomplete:"off",name:"discount",type:"text",placeholder:"Masukkan Promotion Discount",oninput:"this.value = this.value.replace(/[^\\d]/g, '')",class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-2.5",modelValue:e.value.discount,"onUpdate:modelValue":o[3]||(o[3]=s=>e.value.discount=s)},null,8,["modelValue"]),l(i,{name:"discount",class:"text-red-500"})]),t("div",W,[X,l(r,{autocomplete:"off",name:"code",type:"text",placeholder:"Masukkan Promotion Code",class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-2.5",modelValue:e.value.code,"onUpdate:modelValue":o[4]||(o[4]=s=>e.value.code=s)},null,8,["modelValue"]),l(i,{name:"code",class:"text-red-500"})]),t("div",ee,[te,l(r,{autocomplete:"off",name:"start_date",type:"text",placeholder:"Masukkan Promotion Start Date",class:"form-control form-control-solid",modelValue:e.value.start_date,"onUpdate:modelValue":o[6]||(o[6]=s=>e.value.start_date=s)},{default:g(()=>[l(V,{modelValue:e.value.start_date,"onUpdate:modelValue":o[5]||(o[5]=s=>e.value.start_date=s),class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-[11px]",config:{enableTime:!1,format:"Y:m:d H:i"}},null,8,["modelValue"])]),_:1},8,["modelValue"]),l(i,{name:"start_date",class:"text-red-500"})]),t("div",oe,[ae,l(r,{autocomplete:"off",name:"end_date",type:"text",placeholder:"Masukkan Promotion End Date",class:"form-control form-control-solid",modelValue:e.value.end_date,"onUpdate:modelValue":o[8]||(o[8]=s=>e.value.end_date=s)},{default:g(()=>[l(V,{class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-[11px]",modelValue:e.value.end_date,"onUpdate:modelValue":o[7]||(o[7]=s=>e.value.end_date=s),config:{enableTime:!1,format:"Y:m:d H:i"}},null,8,["modelValue"])]),_:1},8,["modelValue"]),l(i,{name:"end_date",class:"text-red-500"})])])]),se])]),_:1},8,["validation-schema"])}}}),ne={class:"border-b-[1px] border-body pb-3"},de={class:"w-full h-full flex flex-col rounded-xl space-y-4"},re={class:"border-b-[1px] border-body flex justify-between items-center p-4"},ce=t("h2",{class:"text-xl"},"Promotion List",-1),me=t("i",{class:"las la-plus"},null,-1),ie={class:"w-full h-full py-2 px-4"},be=B({__name:"Index",setup(x){const d=A(),n=b(null),m=b(""),e=b(!1),{delete:_}=M({onSuccess:n.value?.refetch()}),h=[d.accessor("no",{header:"No"}),d.accessor("name",{header:"Name"}),d.accessor("description",{header:"Description"}),d.accessor("start_date",{header:"Start Date"}),d.accessor("end_date",{header:"End Date"}),d.accessor("uuid",{header:"Action",cell:c=>p("div",{class:"flex gap-4"},[p("button",{class:"btn btn-sm bg-purple-600 hover:bg-purple-700",onClick:()=>{e.value=!0,m.value=c.getValue()}},[p("i",{class:"la la-pencil fs-2"})]),p("button",{class:"btn btn-sm bg-red-600 hover:bg-red-700",onClick:()=>_(`/master/promotion/${c.getValue()}`)},[p("i",{class:"las la-trash fs-2"})])])})],y=()=>n.value.refetch();return R(e,c=>{c||(m.value=""),window.scrollTo(0,0)}),(c,a)=>{const o=f("paginate");return v(),E("main",ne,[e.value?(v(),P(le,{key:0,selected:m.value,onClose:a[0]||(a[0]=r=>e.value=!1),onRefresh:y},null,8,["selected"])):w("",!0),t("div",de,[t("div",re,[ce,e.value?w("",!0):(v(),E("button",{key:0,type:"button",onClick:a[1]||(a[1]=r=>e.value=!0),class:"btn btn-md btn-primary"},[me,S(" Add ")]))]),t("div",ie,[l(o,{ref_key:"paginateRef",ref:n,url:"/master/promotion",id:"table-promotion",columns:h},null,512)])])])}}});export{be as default};
