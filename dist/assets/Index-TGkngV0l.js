import{u as N}from"./hooks-BxjXLzY_.js";import{c as G,a as x}from"./index.esm-NSx9nZrM.js";import{h as B,j as i,O as S,q as D,v as I,e as M,D as k,G as C,E as v,F as $,m as f,p as b,x as e,H as R,C as E,y as d,$ as c,w as A,A as V,B as w,Z as T}from"./main-B8dzZHEF.js";const j={class:"card bg-component text-bodydark1"},q={class:"card-header flex justify-between items-center my-3"},U=e("i",{class:"la la-times-circle"},null,-1),H={class:"card-body"},L={class:"row"},O={class:"mb-3 col-md-6 flex flex-col"},P=e("label",{class:"form-label"},"Name",-1),Z={class:"mb-3 col-md-6 flex flex-col"},z=e("label",{class:"form-label"},"Description",-1),J=e("div",{class:"card-footer flex"},[e("button",{type:"submit",class:"btn btn-md btn-primary ms-auto"},"Submit")],-1),K=B({__name:"Form",props:{selected:{type:String,default:null}},emits:["close","refresh"],setup(_,{emit:l}){const a=_,r=l,s=i({}),m=i(),g=G().shape({name:x().required("Name cannot be empty"),description:x().required("Description cannot be empty")});function h(){k(document.getElementById("form-genre")),C.get(`/master/genre/${a.selected}`).then(({data:t})=>{s.value=t.data}).catch(t=>{console.error(t.response.data.message),v.error(t.response.data.message)}).finally(()=>$(document.getElementById("form-genre")))}function n(){const t=new FormData;t.append("name",s.value.name),t.append("description",s.value.description),a.selected&&t.append("_method","PUT"),k(document.getElementById("form-genre")),C({method:"post",url:a.selected?`/master/genre/${a.selected}`:"/master/genre/store",data:t,headers:{"Content-Type":"multipart/form-data"}}).then(()=>{v.success("Data saved successfully"),m.value.resetForm(),r("close"),r("refresh")}).catch(o=>{console.error(o.response.data.message),v.error(o.response.data.message)}).finally(()=>$(document.getElementById("form-genre")))}return S(()=>{a.selected&&h()}),(t,o)=>{const u=f("Field"),y=f("ErrorMessage"),F=f("VForm");return b(),D(F,{"validation-schema":M(g),ref_key:"formRef",ref:m,onSubmit:n,id:"form-genre"},{default:I(()=>[e("div",j,[e("div",q,[e("h2",null,R(_.selected?"Edit":"Add")+" Genre ",1),e("button",{type:"button",class:"btn btn-md bg-red-600 hover:bg-red-700",onClick:o[0]||(o[0]=p=>t.$emit("close"))},[U,E(" Batal ")])]),e("div",H,[e("div",L,[e("div",O,[P,d(u,{autocomplete:"off",name:"name",type:"text",placeholder:"Masukkan Genre Name",class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-2.5",modelValue:s.value.name,"onUpdate:modelValue":o[1]||(o[1]=p=>s.value.name=p)},null,8,["modelValue"]),d(y,{name:"name",class:"text-red-500"})]),e("div",Z,[z,d(u,{autocomplete:"off",name:"description",type:"text",placeholder:"Masukkan Genre Description",class:"bg-[#232323] border-none focus:ring-[#7C7C7C] rounded-xl p-2.5",modelValue:s.value.description,"onUpdate:modelValue":o[2]||(o[2]=p=>s.value.description=p)},null,8,["modelValue"]),d(y,{name:"description",class:"text-red-500"})])])]),J])]),_:1},8,["validation-schema"])}}}),Q={class:"border-b-[1px] border-body pb-3"},W={class:"w-full h-full flex flex-col rounded-lg space-y-4"},X={class:"border-b-[1px] border-body flex justify-between items-center p-4"},Y=e("h2",{class:"text-xl"},"Genre List",-1),ee=e("i",{class:"las la-plus"},null,-1),te={class:"w-full h-full py-2"},ne=B({__name:"Index",setup(_){const l=T(),a=i(null),r=i(""),s=i(!1),{delete:m}=N({onSuccess:a.value?.refetch()}),g=[l.accessor("no",{header:"No"}),l.accessor("name",{header:"Name"}),l.accessor("description",{header:"Description"}),l.accessor("uuid",{header:"Action",cell:n=>c("div",{class:"flex gap-4"},[c("button",{class:"btn btn-sm bg-purple-600 hover:bg-purple-700",onClick:()=>{s.value=!0,r.value=n.getValue()}},[c("i",{class:"la la-pencil fs-2"})]),c("button",{class:"btn btn-sm bg-red-600 hover:bg-red-700",onClick:()=>{m(`/master/genre/${n.getValue()}`)}},[c("i",{class:"las la-trash fs-2"})])])})],h=()=>a.value?.refetch();return A(s,n=>{n||(r.value=""),window.scrollTo(0,0)}),(n,t)=>{const o=f("paginate");return b(),V("main",Q,[s.value?(b(),D(K,{key:0,class:"mb-4",selected:r.value,onClose:t[0]||(t[0]=u=>s.value=!1),onRefresh:h},null,8,["selected"])):w("",!0),e("div",W,[e("div",X,[Y,s.value?w("",!0):(b(),V("button",{key:0,type:"button",onClick:t[1]||(t[1]=u=>s.value=!0),class:"btn btn-md btn-primary"},[ee,E(" Add ")]))]),e("div",te,[d(o,{ref_key:"paginateRef",ref:a,url:"/master/genre",id:"table-genre",columns:g},null,512)])])])}}});export{ne as default};
